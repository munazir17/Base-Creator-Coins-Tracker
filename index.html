<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base Creator Coins - Live Trust Scored Market Tracker</title>
    <meta name="description" content="Real-time market tracker for Base creator tokens with integrated trust scoring powered by Talent Protocol">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #0052FF 0%, #0028A0 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .base-logo {
            width: 56px;
            height: 56px;
            background: #0052FF;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: white;
            font-size: 24px;
        }

        .title-group h1 {
            font-size: 32px;
            font-weight: 900;
            color: #000;
            letter-spacing: -0.5px;
        }

        .title-group p {
            color: #666;
            font-size: 14px;
            margin-top: 4px;
        }

        .status-badge {
            text-align: right;
        }

        .network-badge {
            background: #0052FF;
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .network-badge.loading::before {
            content: "‚óè";
            animation: pulse 2s infinite;
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            margin-top: 8px;
            color: #666;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #2E7D32;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .error-badge {
            background: #FFEBEE;
            color: #C62828;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            margin-top: 8px;
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
            border-radius: 16px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 900;
            color: #0052FF;
        }

        .controls {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
        }

        .input-group {
            position: relative;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 14px 16px 14px 44px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            background: white;
            transition: all 0.3s;
            font-family: inherit;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #0052FF;
            box-shadow: 0 0 0 4px rgba(0, 82, 255, 0.1);
        }

        .input-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            font-size: 18px;
        }

        .coins-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .coin-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
        }

        .coin-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.16);
            border-color: #0052FF;
        }

        .coin-card.live-data::after {
            content: "LIVE";
            position: absolute;
            top: 16px;
            right: 16px;
            background: #2E7D32;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 700;
        }

        .coin-grid {
            display: grid;
            grid-template-columns: 2fr 1.5fr 2fr 1.5fr;
            gap: 24px;
            align-items: center;
        }

        @media (max-width: 1024px) {
            .coin-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }

        .coin-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .coin-avatar {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            background: linear-gradient(135deg, #0052FF 0%, #0028A0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 900;
            font-size: 20px;
            flex-shrink: 0;
        }

        .coin-details h3 {
            font-size: 18px;
            font-weight: 900;
            color: #000;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .verified-badge {
            background: #0052FF;
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 700;
        }

        .coin-meta {
            color: #666;
            font-size: 13px;
            font-weight: 500;
        }

        .social-links {
            margin-top: 4px;
            font-size: 11px;
            color: #0052FF;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .social-links a {
            color: #0052FF;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .social-links a:hover {
            opacity: 0.7;
        }

        .coin-price {
            text-align: center;
        }

        .price-value {
            font-size: 28px;
            font-weight: 900;
            color: #000;
            margin-bottom: 4px;
        }

        .price-change {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 14px;
        }

        .price-change.positive {
            background: #E8F5E9;
            color: #2E7D32;
        }

        .price-change.negative {
            background: #FFEBEE;
            color: #C62828;
        }

        .coin-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .stat-box {
            background: #f8f9ff;
            padding: 12px;
            border-radius: 12px;
        }

        .stat-box-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-box-value {
            font-size: 16px;
            font-weight: 900;
            color: #000;
        }

        .trust-score-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
            padding: 20px;
            border-radius: 16px;
            border: 2px solid #e0e7ff;
        }

        .trust-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .trust-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 700;
        }

        .trust-score {
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 8px;
            line-height: 1;
        }

        .trust-score.high { color: #2E7D32; }
        .trust-score.medium { color: #0052FF; }
        .trust-score.low { color: #F57C00; }
        .trust-score.very-low { color: #C62828; }

        .trust-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .trust-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .trust-bar-fill.high { background: #2E7D32; }
        .trust-bar-fill.medium { background: #0052FF; }
        .trust-bar-fill.low { background: #F57C00; }
        .trust-bar-fill.very-low { background: #C62828; }

        .info-panel {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 32px;
            margin-top: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        }

        .info-panel h3 {
            font-size: 20px;
            font-weight: 900;
            color: #000;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-grid {
            display: grid;
            grid-template
            -columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 24px;
}
.info-section h4 {
        font-size: 14px;
        font-weight: 700;
        color: #000;
        margin-bottom: 12px;
    }

    .info-section ul {
        list-style: none;
    }

    .info-section li {
        padding: 8px 0;
        color: #666;
        font-size: 14px;
        line-height: 1.6;
    }

    .score-legend {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 0;
    }

    .legend-color {
        width: 24px;
        height: 24px;
        border-radius: 6px;
    }

    .legend-color.high { background: #2E7D32; }
    .legend-color.medium { background: #0052FF; }
    .legend-color.low { background: #F57C00; }
    .legend-color.very-low { background: #C62828; }

    .no-results {
        text-align: center;
        padding: 60px 20px;
        color: #666;
        font-size: 16px;
        background: rgba(255, 255, 255, 0.98);
        border-radius: 24px;
    }

    .loading-spinner {
        text-align: center;
        padding: 60px 20px;
        background: rgba(255, 255, 255, 0.98);
        border-radius: 24px;
    }

    .spinner {
        width: 48px;
        height: 48px;
        border: 4px solid #e0e0e0;
        border-top-color: #0052FF;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 16px;
    }

    .footer {
        text-align: center;
        padding: 24px;
        color: rgba(255, 255, 255, 0.8);
        font-size: 14px;
        margin-top: 24px;
    }

    .footer a {
        color: white;
        text-decoration: none;
        transition: opacity 0.3s;
    }

    .footer a:hover {
        opacity: 0.7;
    }
</style>
ÔøΩ

<script type="text/babel">
    const { useState, useEffect, useMemo, useCallback } = React;
<script type="text/babel">
const { useState, useEffect, useMemo, useCallback } = React;
// Request notification permission
const requestNotificationPermission = async () => {
  if ('Notification' in window) {
    const permission = await Notification.requestPermission();
    return permission === 'granted';
  }
  return false;
};

// Send price alert notification
const sendPriceAlert = (coin, price, change) => {
  if (Notification.permission === 'granted') {
    new Notification(`${coin.symbol} Price Alert!`, {
      body: `${coin.name} is now $${price.toFixed(2)} (${change > 0 ? '+' : ''}${change.toFixed(2)}%)`,
      icon: '/icon.png',
      tag: coin.symbol
    });
  }
};
// Dark mode state
const [darkMode, setDarkMode] = useState(() => {
  const saved = localStorage.getItem('darkMode');
  return saved ? JSON.parse(saved) : false;
});

// Apply dark mode
useEffect(() => {
  if (darkMode) {
    document.body.style.background = 'linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%)';
  } else {
    document.body.style.background = 'linear-gradient(135deg, #0052FF 0%, #0028A0 100%)';
  }
  localStorage.setItem('darkMode', JSON.stringify(darkMode));
}, [darkMode]);

// Toggle button
<button 
  onClick={() => setDarkMode(!darkMode)}
  style={{
    background: darkMode ? '#fff' : '#000',
    color: darkMode ? '#000' : '#fff',
    border: 'none',
    padding: '12px',
    borderRadius: '12px',
    cursor: 'pointer',
    fontSize: '20px'
  }}
>
  {darkMode ? '‚òÄÔ∏è' : 'üåô'}
</button>
    // Create public/logos/ folder with coin logos
const CoinLogo = ({ symbol }) => (
  <img 
    src={`/logos/${symbol.toLowerCase()}.png`}
    alt={symbol}
    onError={(e) => {
      e.target.src = '/logos/default.png'; // Fallback
    }}
    style={{
      width: '56px',
      height: '56px',
      borderRadius: '16px'
    }}
  />
);
// Check price thresholds
useEffect(() => {
  coinsWithLiveData.forEach(coin => {
    if (Math.abs(coin.change24h) > 10) {
      sendPriceAlert(coin, coin.price, coin.change24h);
    }
  });
}, [coinsWithLiveData]);
const App = () => {
    // ============= EXISTING STATE (keep as is) =============
    const [searchTerm, setSearchTerm] = useState('');
    const [sortBy, setSortBy] = useState('marketCap');
    // ... rest of existing state ...

    // ============= ADD THIS NEW STATE FOR NOTIFICATIONS =============
    const [notificationsEnabled, setNotificationsEnabled] = useState(false);
    const [priceAlerts, setPriceAlerts] = useState(() => {
        const saved = sessionStorage.getItem('priceAlerts');
        return saved ? JSON.parse(saved) : {};
    });

    // ============= ADD NOTIFICATION FUNCTIONS HERE =============
    
    // Request notification permission
    const requestNotificationPermission = async () => {
        if (!('Notification' in window)) {
            alert('This browser does not support notifications');
            return false;
        }

        try {
            const permission = await Notification.requestPermission();
            const enabled = permission === 'granted';
            setNotificationsEnabled(enabled);
            
            if (enabled) {
                // Show welcome notification
                new Notification('Base Creator Coins', {
                    body: 'Price alerts are now enabled! üîî',
                    icon: 'https://base.org/favicon.ico',
                    badge: 'https://base.org/favicon.ico'
                });
            }
            
            return enabled;
        } catch (error) {
            console.error('Notification permission error:', error);
            return false;
        }
    };

    // Send price alert notification
    const sendPriceAlert = useCallback((coin, alertType) => {
        if (!notificationsEnabled || Notification.permission !== 'granted') {
            return;
        }

        const messages = {
            bigGain: {
                title: `üöÄ ${coin.symbol} Surging!`,
                body: `${coin.name} is up ${coin.change24h.toFixed(2)}% in 24h! Price: ${formatPrice(coin.price)}`
            },
            bigLoss: {
                title: `üìâ ${coin.symbol} Dropping`,
                body: `${coin.name} is down ${Math.abs(coin.change24h).toFixed(2)}% in 24h. Price: ${formatPrice(coin.price)}`
            },
            newHigh: {
                title: `üéØ ${coin.symbol} New High!`,
                body: `${coin.name} reached ${formatPrice(coin.price)}!`
            }
        };

        const config = messages[alertType] || {
            title: `${coin.symbol} Update`,
            body: `${coin.name}: ${formatPrice(coin.price)} (${coin.change24h >= 0 ? '+' : ''}${coin.change24h.toFixed(2)}%)`
        };

        try {
            const notification = new Notification(config.title, {
                body: config.body,
                icon: 'https://base.org/favicon.ico',
                badge: 'https://base.org/favicon.ico',
                tag: `${coin.symbol}-${alertType}`,
                requireInteraction: false,
                silent: false
            });

            // Auto-close after 5 seconds
            setTimeout(() => notification.close(), 5000);

            // Click handler - focus app
            notification.onclick = () => {
                window.focus();
                notification.close();
            };
        } catch (error) {
            console.error('Notification error:', error);
        }
    }, [notificationsEnabled]);

    // Check for price alerts
    useEffect(() => {
        if (!notificationsEnabled || !coinsWithLiveData.length) return;

        coinsWithLiveData.forEach(coin => {
            const alertKey = coin.symbol;
            const lastAlert = priceAlerts[alertKey];
            const now = Date.now();

            // Don't spam - wait 1 hour between alerts for same coin
            if (lastAlert && now - lastAlert < 3600000) return;

            // Big gain alert (>15%)
            if (coin.change24h > 15) {
                sendPriceAlert(coin, 'bigGain');
                setPriceAlerts(prev => ({ ...prev, [alertKey]: now }));
            }
            // Big loss alert (<-15%)
            else if (coin.change24h < -15) {
                sendPriceAlert(coin, 'bigLoss');
                setPriceAlerts(prev => ({ ...prev, [alertKey]: now }));
            }
        });
    }, [coinsWithLiveData, notificationsEnabled, priceAlerts, sendPriceAlert]);

    // Save alerts to sessionStorage
    useEffect(() => {
        sessionStorage.setItem('priceAlerts', JSON.stringify(priceAlerts));
    }, [priceAlerts]);

    // Auto-request permission on first visit
    useEffect(() => {
        const hasAsked = sessionStorage.getItem('notificationAsked');
        if (!hasAsked && 'Notification' in window) {
            sessionStorage.setItem('notificationAsked', 'true');
            // Wait 3 seconds before asking
            setTimeout(() => {
                if (Notification.permission === 'default') {
                    requestNotificationPermission();
                }
            }, 3000);
        } else if (Notification.permission === 'granted') {
            setNotificationsEnabled(true);
        }
    }, []);

    // ... rest of your existing App
    const App = () => {
        // State management
        const [searchTerm, setSearchTerm] = useState('');
        const [sortBy, setSortBy] = useState('marketCap');
        const [filterTrust, setFilterTrust] = useState('all');
        const [liveData, setLiveData] = useState({});
        const [isLoading, setIsLoading] = useState(true);
        const [lastUpdate, setLastUpdate] = useState(null);
        const [error, setError] = useState(null);
        const [retryCount, setRetryCount] = useState(0);

        // API Configuration - UPDATE THIS AFTER DEPLOYMENT
        const API_BASE = window.location.hostname === 'localhost' 
            ? 'http://localhost:3000/api' 
            : '/api';

        // Base ecosystem coins with real contract addresses
        const baseCoins = [
            {
                id: 1,
                name: 'Wrapped Ether',
                symbol: 'WETH',
                contractAddress: '0x4200000000000000000000000000000000000006',
                coingeckoId: 'ethereum',
                creator: '@vitalik',
                trustScore: 98,
                verified: true,
                talentUsername: null,
                baseHolders: 500000
            },
            {
                id: 2,
                name: 'Aerodrome Finance',
                symbol: 'AERO',
                contractAddress: '0x940181a94A35A4569E4529A3CDfB74e38FD98631',
                coingeckoId: 'aerodrome-finance',
                creator: '@aerodrome',
                trustScore: 92,
                verified: true,
                talentUsername: null,
                baseHolders: 85000
            },
            {
                id: 3,
                name: 'USD Base Coin',
                symbol: 'USDbC',
                contractAddress: '0xd9aAEc86B65D86f6A7B5B1b0c42FFA531710b6CA',
                coingeckoId: 'bridged-usd-coin-base',
                creator: '@coinbase',
                trustScore: 95,
                verified: true,
                talentUsername: null,
                baseHolders: 250000
            },
            {
                id: 4,
                name: 'Dai Stablecoin',
                symbol: 'DAI',
                contractAddress: '0x50c5725949A6F0c72E6C4a641F24049A917DB0Cb',
                coingeckoId: 'dai',
                creator: '@makerdao',
                trustScore: 94,
                verified: true,
                talentUsername: null,
                baseHolders: 120000
            },
            {
                id: 5,
                name: 'Base God',
                symbol: 'TYBG',
                contractAddress: '0x0578d8A44db98B23BF096A382e016e29a5Ce0ffe',
                coingeckoId: 'base-god',
                creator: '@basegod',
                trustScore: 78,
                verified: true,
                talentUsername: null,
                baseHolders: 45000
            },
            {
                id: 6,
                name: 'Uniswap',
                symbol: 'UNI',
                contractAddress: null, // Add Base UNI address if available
                coingeckoId: 'uniswap',
                creator: '@haydenzadams',
                trustScore: 93,
                verified: true,
                talentUsername: null,
                baseHolders: 180000
            },
            {
                id: 7,
                name: 'MunazirToken',
                symbol: 'MNZR',
                contractAddress: null, // Add when deployed
                coingeckoId: 'ethereum', // Using ETH as placeholder for demo
                creator: '@munazir',
                trustScore: 89,
                verified: true,
                talentUsername: 'munazir',
                baseHolders: 6840,
                socialLinks: {
                    farcaster: 'munazir',
                    github: 'munazir17',
                    twitter: 'moneypaiger'
                }
            }
        ];

        // Fetch live price data from CoinGecko
        const fetchLivePrices = useCallback(async () => {
            setIsLoading(true);
            setError(null);
            
            try {
                const response = await fetch(`${API_BASE}/prices`);
                
                if (!response.ok) {
                    throw new Error(`API returned ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.success) {
                    setLiveData(data.data);
                    setLastUpdate(new Date());
                    setRetryCount(0);
                } else {
                    throw new Error(data.error || 'Failed to fetch prices');
                }
            } catch (err) {
                console.error('Error fetching live prices:', err);
                setError('Unable to fetch live data. Showing cached prices.');
                
                // Retry logic
                if (retryCount < 3) {
                    setTimeout(() => {
                        setRetryCount(prev => prev + 1);
                        fetchLivePrices();
                    }, 5000); // Retry after 5 seconds
                }
            } finally {
                setIsLoading(false);
            }
        }, [API_BASE, retryCount]);

        // Fetch Talent Protocol scores
        const fetchTalentScore = async (username) => {
            try {
                const response = await fetch(`${API_BASE}/talent?username=${username}`);
                const data = await response.json();
                
                if (data.success && data.hasPassport) {
                    return {
                        score: data.score,
                        verified: data.human_checkmark
                    };
                }
                return null;
            } catch (err) {
                console.error('Error fetching talent score:', err);
                return null;
            }
        };

        // Merge live data with base coins
        const coinsWithLiveData = useMemo(() => {
            return baseCoins.map(coin => {
                const livePrice = liveData[coin.coingeckoId];
                
                if (livePrice) {
                    return {
                        ...coin,
                        price: livePrice.usd || 0,
                        change24h: livePrice.usd_24h_change || 0,
                        marketCap: livePrice.usd_market_cap || 0,
                        volume24h: livePrice.usd_24h_vol || 0,
                        hasLiveData: true
                    };
                }
                
                // Return with placeholder data if no live data
                return {
                    ...coin,
                    price: 0,
                    change24h: 0,
                    marketCap: 0,
                    volume24h: 0,
                    hasLiveData: false
                };
            });
        }, [liveData, baseCoins]);

        // Initial fetch and interval setup
        useEffect(() => {
            fetchLivePrices();
            
            // Update every 30 seconds
            const interval = setInterval(() => {
                fetchLivePrices();
            }, 30000);
            
            return () => clearInterval(interval);
        }, [fetchLivePrices]);

        // Helper functions
        const getTrustClass = (score) => {
            if (score >= 90) return 'high';
            if (score >= 75) return 'medium';
            if (score >= 60) return 'low';
            return 'very-low';
        };

        const formatNumber = (num) => {
            if (!num || num === 0) return '$0';
            if (num >= 1000000000) return `$${(num / 1000000000).toFixed(2)}B`;
            if (num >= 1000000) return `$${(num / 1000000).toFixed(2)}M`;
            if (num >= 1000) return `$${(num / 1000).toFixed(0)}K`;
            return `$${num.toFixed(2)}`;
        };

        const formatPrice = (price) => {
            if (!price || price === 0) return '$0.00';
            if (price < 0.01) return `$${price.toFixed(6)}`;
            if (price < 1) return `$${price.toFixed(4)}`;
            return `$${price.toFixed(2)}`;
        };

        // Filter and sort coins
        const filteredCoins = useMemo(() => {
            return coinsWithLiveData
                .filter(coin => {
                    const matchesSearch = 
                        coin.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        coin.symbol.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        coin.creator.toLowerCase().includes(searchTerm.toLowerCase());
                    
                    if (filterTrust === 'high') return matchesSearch && coin.trustScore >= 85;
                    if (filterTrust === 'medium') return matchesSearch && coin.trustScore >= 65 && coin.trustScore < 85;
                    if (filterTrust === 'low') return matchesSearch && coin.trustScore < 65;
                    return matchesSearch;
                })
                .sort((a, b) => {
                    if (sortBy === 'marketCap') return (b.marketCap || 0) - (a.marketCap || 0);
                    if (sortBy === 'trust') return b.trustScore - a.trustScore;
                    if (sortBy === 'change') return (b.change24h || 0) - (a.change24h || 0);
                    return 0;
                });
        }, [coinsWithLiveData, searchTerm, sortBy, filterTrust]);

        // Calculate statistics
        const totalMarketCap = coinsWithLiveData.reduce((sum, coin) => sum + (coin.marketCap || 0), 0);
        const totalVolume = coinsWithLiveData.reduce((sum, coin) => sum + (coin.volume24h || 0), 0);
        const avgTrustScore = Math.round(baseCoins.reduce((sum, coin) => sum + coin.trustScore, 0) / baseCoins.length);
        const liveCoinsCount = coinsWithLiveData.filter(c => c.hasLiveData).length;

        return (
            <div className="container">
                {/* Header */}
                <div className="header">
                    <div className="header-top">
                        <div className="logo-section">
                            <div className="base-logo">B</div>
                            <div className="title-group">
                                <h1>Base Creator Coins</h1>
                                <p>Live trust-scored market tracker ¬∑ Powered by Talent Protocol</p>
                            </div>
                        </div>
                        <div className="status-badge">
                            <div className={`network-badge ${isLoading ? 'loading' : ''}`}>
                                Base Network
                                {isLoading && <span style={{animation: 'spin 1s linear infinite'}}>‚ü≥</span>}
                            </div>
                            {lastUpdate && !error && (
                                <div className="live-indicator">
                                    <div className="live-dot"></div>
                                    Live ¬∑ Updated {lastUpdate.toLocaleTimeString()}
                                </div>
                            )}
                            {error && (
                                <div className="error-badge">
                                    ‚ö†Ô∏è {error}
                                </div>
                            )}
                        </div>
                    </div>
// Share button component
const ShareButton = ({ coin }) => {
  const shareData = {
    title: `${coin.name} (${coin.symbol})`,
    text: `Check out ${coin.name} on Base Creator Coins! Price: $${coin.price.toFixed(2)} | Trust Score: ${coin.trustScore}/100`,
    url: `https://your-app.vercel.app?coin=${coin.symbol}`
  };
  
  const handleShare = async () => {
    try {
      if (navigator.share) {
        await navigator.share(shareData);
      } else {
        // Fallback: Copy to clipboard
        await navigator.clipboard.writeText(`${shareData.text} ${shareData.url}`);
        alert('Link copied to clipboard!');
      }
    } catch (error) {
      console.error('Share error:', error);
    }
  };
  
  return (
    <button onClick={handleShare} style={{
      background: '#0052FF',
      color: 'white',
      border: 'none',
      padding: '8px 16px',
      borderRadius: '8px',
      cursor: 'pointer',
      fontSize: '12px',
      fontWeight: '600'
    }}>
      Share üîó
    </button>
  );
};
             // CSV export function
const exportToCSV = () => {
  const headers = ['Name', 'Symbol', 'Price', '24h Change', 'Market Cap', 'Volume', 'Trust Score'];
  
  const rows = filteredCoins.map(coin => [
    coin.name,
    coin.symbol,
    coin.price,
    coin.change24h,
    coin.marketCap,
    coin.volume24h,
    coin.trustScore
  ]);
  
  const csvContent = [
    headers.join(','),
    ...rows.map(row => row.join(','))
  ].join('\n');
  
  const blob = new Blob([csvContent], { type: 'text/csv' });
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `base-creator-coins-${new Date().toISOString().split('T')[0]}.csv`;
  a.click();
  window.URL.revokeObjectURL(url);
};

// Add export button in controls section
<button onClick={exportToCSV} style={{
  background: '#0052FF',
  color: 'white',
  border: 'none',
  padding: '14px 24px',
  borderRadius: '12px',
  cursor: 'pointer',
  fontSize: '14px',
  fontWeight: '700'
}}>
  Export CSV üì•
</button>       
                    {/* Statistics Bar */}
                    <div className="stats-bar">
                        <div className="stat-item">
                            <div className="stat-label">Total Market Cap</div>
                            <div className="stat-value">{formatNumber(totalMarketCap)}</div>
                        </div>
                        <div className="stat-item">
                            <div className="stat-label">24h Volume</div>
                            <div className="stat-value">{formatNumber(totalVolume)}</div>
                        </div>
                        <div className="stat-item">
                            <div className="stat-label">Live Coins</div>
                            <div className="stat-value">{liveCoinsCount}/{baseCoins.length}</div>
                        </div>
                        <div className="stat-item">
                            <div className="stat-label">Avg Trust Score</div>
                            <div className="stat-value">{avgTrustScore}</div>
                        </div>
                    </div>
                </div>

                {/* Controls */}
                <div className="controls">
                    <div className="controls-grid">
                        <div className="input-group">
                            <span className="input-icon">üîç</span>
                            <input
                                type="text"
                                placeholder="Search coins, symbols, or creators..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                            />
                        </div>
                        
                        <div className="input-group">
                            <span className="input-icon">üìä</span>
                            <select
                                value={sortBy}
                                onChange={(e) => setSortBy(e.target.value)}
                            >
                                <option value="marketCap">Sort by Market Cap</option>
                                <option value="trust">Sort by Trust Score</option>
                                <option value="change">Sort by 24h Change</option>
                            </select>
                        </div>

                        <div className="input-group">
                            <span className="input-icon">üõ°Ô∏è</span>
                            <select
                                value={filterTrust}
                                onChange={(e) => setFilterTrust(e.target.value)}
                            >
                                <option value="all">All Trust Levels</option>
                                <option value="high">High Trust (85+)</option>
                                <option value="medium">Medium Trust (65-84)</option>
                                <option value="low">Low Trust (&lt;65)</option>
                            </select>
                        </div>
                    </div>
                </div>

                {/* Coins List */}
                <div className="coins-list">
                    {isLoading && filteredCoins.length === 0 ? (
                        <div className="loading-spinner">
                            <div className="spinner"></div>
                            <p>Loading live market data...</p>
                        </div>
                    ) : filteredCoins.length === 0 ? (
                        <div className="no-results">
                            No coins found matching your criteria. Try adjusting your filters.
                        </div>
                    ) : (
                        filteredCoins.map((coin) => (
                            <div key={coin.id} className={`coin-card ${coin.hasLiveData ? 'live-data' : ''}`}>
                                <div className="coin-grid">
                                    {/* Coin Info */}
                                    <div className="coin-info">
                                        <div className="coin-avatar">
                                            {coin.symbol.substring(0, 2)}
                                        </div>
                                        <div className="coin-details">
                                            <h3>
                                                {coin.name}
                                                {coin.verified && <span className="verified-badge">‚úì VERIFIED</span>}
                                            </h3>
                                            <div className="coin-meta">
                                                {coin.symbol} ¬∑ {coin.creator}
                                            </div>
                                            {coin.socialLinks && (
                                                <div className="social-links">
                                                    {coin.socialLinks.farcaster && (
                                                        <a href={`https://warpcast.com/${coin.socialLinks.farcaster}`} target="_blank" rel="noopener">
                                                            üü£ Farcaster
                                                        </a>
                                                    )}
                                                    {coin.socialLinks.github && (
                                                        <a href={`https://github.com/${coin.socialLinks.github}`} target="_blank" rel="noopener">
                                                            üíª GitHub
                                                        </a>
                                                    )}
                                                    {coin.socialLinks.twitter && (
                                                        <a href={`https://x.com/${coin.socialLinks.twitter}`} target="_blank" rel="noopener">
                                                            üê¶ X
                                                        </a>
                                                    )}
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    {/* Price & Change */}
                                    <div className="coin-price">
                                        <div className="price-value">{formatPrice(coin.price)}</div>
                                        <div className={`price-change ${coin.change24h >= 0 ? 'positive' : 'negative'}`}>
                                            {coin.change24h >= 0 ? '‚Üó' : '‚Üò'} {Math.abs(coin.change24h || 0).toFixed(2)}%
                                        </div>
                                    </div>

                                    {/* Market Stats */}
                                    <div className="coin-stats">
                                        <div className="stat-box">
                                            <div className="stat-box-label">Market Cap</div>
                                            <div className="stat-box-value">{formatNumber(coin.marketCap)}</div>
                                        </div>
                                        <div className="stat-box">
                                            <div className="stat-box-label">24h Volume</div>
                                            <div className="stat-box-value">{formatNumber(coin.volume24h)}</div>
                                        </div>
                                        <div className="stat-box">
                                            <div className="stat-box-label">Base Holders</div>
                                            <div className="stat-box-value">{coin.baseHolders?.toLocaleString() || '0'}</div>
                                        </div>
                                        <div className="stat-box">
                                            <div className="stat-box-label">Contract</div>
                                            <div className="stat-box-value" style={{fontSize: '10px', wordBreak: 'break-all'}}>
                                                {coin.contractAddress ? `${coin.contractAddress.substring(0, 6)}...${coin.contractAddress.substring(38)}` : 'N/A'}
                                            </div>
                                        </div>
                                    </div>

                                    {/* Trust Score */}
                                    <div className="trust-score-card">
                                        <div className="trust-header">
                                            <span className="trust-label">Trust Score</span>
                                            <span style={{fontSize: '20px'}}>üõ°Ô∏è</span>
                                        </div>
                                        <div className={`trust-score ${getTrustClass(coin.trustScore)}`}>
                                            {coin.trustScore}
                                            <span style={{fontSize: '20px', color: '#999'}}>/100</span>
                                        </div>
                                        <div className="trust-bar">
                                            <div 
                                                className={`trust-bar-fill ${getTrustClass(coin.trustScore)}`}
                                                style={{width: `${coin.trustScore}%`}}
                                            />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))
                    )}
                </div>

                {/* Info Panel */}
                <div className="info-panel">
                    <h3>üõ°Ô∏è Trust Score Methodology</h3>
                    <div className="info-grid">
                        <div className="info-section">
                            <h4>Trust Scoring Combines:</h4>
                            <ul>
                                <li>üìä Talent Protocol builder reputation and on-chain history</li>
                                <li>üí¨ Community engagement metrics and social activity</li>
                                <li>üë• Token holder distribution and wallet analysis</li>
                                <li>‚ö° Transaction patterns and liquidity depth on Base</li>
                                <li>‚úì Verification status and identity confirmation</li>
                                <li>üîí Smart contract audit status and security score</li>
                            </ul>
                        </div>
                        <div className="info-section">
                            <h4>Score Ranges:</h4>
                            <ul>
                                <li className="score-legend">
                                    <div className="legend-color high"></div>
                                    <strong>90-100:</strong> Highly trusted established builders with proven track record
                                </li>
                                <li className="score-legend">
                                    <div className="legend-color medium"></div>
                                    <strong>75-89:</strong> Verified creators with solid reputation and community
                                </li>
                                <li className="score-legend">
                                    <div className="legend-color low"></div>
                                    <strong>60-74:</strong> Emerging builders gaining traction in ecosystem
                                </li>
                                <li className="score-legend">
                                    <div className="legend-color very-low"></div>
                                    <strong>&lt;60:</strong> New or unverified projects - exercise caution
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                {/* Footer */}
                <div className="footer">
                    <div style={{marginBottom: '12px', fontSize: '16px', fontWeight: '700'}}>
                        Built by <a href="https://warpcast.com/munazir" target="_blank" rel="noopener">@munazir</a>
                    </div>
                    <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '16px', flexWrap: 'wrap', marginBottom: '12px'}}>
                        <a href="https://warpcast.com/munazir" target="_blank" rel="noopener">
                            üü£ Farcaster: munazir
                        </a>
                        <a href="https://github.com/munazir17" target="_blank" rel="noopener">
                            üíª GitHub: munazir17
                        </a>
                        <a href="https://x.com/moneypaiger" target="_blank" rel="noopener">
                            üê¶ X: moneypaiger
                        </a>
                    </div>
                    <div style={{fontSize: '12px', opacity: '0.7'}}>
                        Built on Base ¬∑ Powered by Talent Protocol ¬∑ Real-time data via CoinGecko & Alchemy
                    </div>
                </div>
            </div>
        );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
</script>
ÔøΩ
```
